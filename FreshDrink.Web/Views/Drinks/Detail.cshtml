@model FreshDrink.Web.ViewModels.DrinkDetailVm
@* Fields: Id, Name, Price, CategoryName, Description, ImageUrl, IsActive *@
@using System.Globalization

@{
    ViewData["Title"] = Model?.Name ?? "Chi tiết đồ uống";

    // Ảnh hiển thị: ưu tiên ImageUrl nếu có, ngược lại dùng placeholder
    var imgUrl = !string.IsNullOrWhiteSpace(Model?.ImageUrl)
        ? Model!.ImageUrl
        : Url.Content("~/images/no-image.png");

    // Định dạng tiền theo vi-VN (nếu muốn hiện "₫")
    var vnd = CultureInfo.GetCultureInfo("vi-VN");
    var priceText = (Model?.Price ?? 0M).ToString("N0", vnd) + " đ";
}

<div class="row g-4">
    <div class="col-md-5">
        <img src="@imgUrl" class="img-fluid rounded border" alt="@Model?.Name" />
    </div>

    <div class="col-md-7">
        <h2 class="mb-1">@Model?.Name</h2>

        @if (!string.IsNullOrWhiteSpace(Model?.CategoryName))
        {
            <div class="text-muted mb-2">@Model!.CategoryName</div>
        }

        <div class="h4 text-danger">@priceText</div>

        @if (!string.IsNullOrWhiteSpace(Model?.Description))
        {
            <p class="mt-3">@Model!.Description</p>
        }

        @if (Model?.IsActive ?? true)
        {
            <form class="d-flex gap-2" asp-controller="Cart" asp-action="Add" method="post">
                @Html.AntiForgeryToken()
                <input type="hidden" name="drinkId" value="@Model!.Id" />
                <input type="number" name="quantity" min="1" value="1" class="form-control" style="max-width:120px" />
                <button type="submit" class="btn btn-primary">Thêm vào giỏ</button>
            </form>
        }
        else
        {
            <div class="alert alert-warning mt-3">Sản phẩm tạm ngừng bán.</div>
        }
    </div>
</div>
